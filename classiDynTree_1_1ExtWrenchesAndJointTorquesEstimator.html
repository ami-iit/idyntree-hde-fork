<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>iDynTree::ExtWrenchesAndJointTorquesEstimator class | iDynTree master</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="./index.html">iDynTree</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">master</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li>
              <a href="pages.html">Versions</a>
              <ol>
                <li><a href="./index.html">Master</a></li>
              </ol>
            </li>
            <li>
              <a href="pages.html">Contacts</a>
              <ol>
                <li><a href="https://github.com/robotology/idyntree">GitHub</a></li>
                <li><a href="https://www.iit.it/web/ami/">Lab website</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceiDynTree.html">iDynTree</a>::<wbr/></span>ExtWrenchesAndJointTorquesEstimator <span class="m-thin">class</span>
          <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="ExtWrenchesAndJointTorquesEstimator_8h.html">&lt;iDynTree/Estimation/ExtWrenchesAndJointTorquesEstimator.h&gt;</a></div>
        </h1>
        <p>Estimator for external wrenches and joint torques using internal F/T sensors.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>This is a class for estimating external wrenches and joint torques using as an input the robot velocities and the accelerations and the measurement of internal six axis F/T sensors.</p><p>The kinematic information (position,velocity and acceleration) necessary for the estimation can be provided in two ways:</p><ul><li>using the updateKinematicsFromFloatingBase</li><li>using the updateKinematicsFromFixedBase</li></ul><p>Note that in both ways there is no need (for the estimation) to provide the absolute position and linear velocity of the robot with respect to the inertial frame. The effect of gravity is considered by directly using the proper acceleration in the case of the floating frame (proper acceleration can be directly measured by an accelerometer) or by directly providing the gravity vector in the fixed frame case.</p>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="afaddafcf6ed76bc417e3780ceebf81db">
              <span class="m-doc-wrap-bumper"><a href="#afaddafcf6ed76bc417e3780ceebf81db" class="m-doc-self">ExtWrenchesAndJointTorquesEstimator</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Constructor.</dd>
            <dt id="a21ecaac3728255f5ad511123ca97ec77">
              <span class="m-doc-wrap-bumper"><a href="#a21ecaac3728255f5ad511123ca97ec77" class="m-doc-self">~ExtWrenchesAndJointTorquesEstimator</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Destructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ab62c38a61392178a65af5a90a6a7a076" class="m-doc">setModelAndSensors</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a>&amp; _model,
              const <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a>&amp; _sensors) -&gt; bool</span>
            </dt>
            <dd>Set model and sensors used for the estimation.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#af366663099c8b4772ab27485bc3581f8" class="m-doc">loadModelAndSensorsFromFile</a>(</span><span class="m-doc-wrap">const std::string filename,
              const std::string filetype = &quot;&quot;) -&gt; bool <span class="m-label m-danger">deprecated</span></span>
            </dt>
            <dd>Load model and sensors from file.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a65ada8c5265bed3d7f19bd1b3694be18" class="m-doc">loadModelAndSensorsFromFileWithSpecifiedDOFs</a>(</span><span class="m-doc-wrap">const std::string filename,
              const std::vector&lt;std::string&gt;&amp; consideredDOFs,
              const std::string filetype = &quot;&quot;) -&gt; bool</span>
            </dt>
            <dd>Load model and sensors from file, specifieng the dof considered for the estimation.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ae1fcc20d0e3eb0eace44e334d931c0f4" class="m-doc">model</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a>&amp;</span>
            </dt>
            <dd>Get used model.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a5da76e1decfef128f4580a108d865166" class="m-doc">sensors</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a>&amp;</span>
            </dt>
            <dd>Get used sensors.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0ad964451590f8bbe0a9bb9e01de1374" class="m-doc">submodels</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classiDynTree_1_1SubModelDecomposition.html" class="m-doc">SubModelDecomposition</a>&amp;</span>
            </dt>
            <dd>Get the used submodel decomposition.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a5d44956cd4c5a64c2c3397fce2c9edd8" class="m-doc">updateKinematicsFromFloatingBase</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1JointPosDoubleArray.html" class="m-doc">JointPosDoubleArray</a>&amp; jointPos,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointVel,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointAcc,
              const FrameIndex&amp; floatingFrame,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; properClassicalLinearAcceleration,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; angularVel,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; angularAcc) -&gt; bool</span>
            </dt>
            <dd>Set the kinematic information necessary for the force estimation using the acceleration and angular velocity information of a floating frame.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a988f7114c5e0661ddd931d98c04645c9" class="m-doc">updateKinematicsFromFixedBase</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1JointPosDoubleArray.html" class="m-doc">JointPosDoubleArray</a>&amp; jointPos,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointVel,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointAcc,
              const FrameIndex&amp; fixedFrame,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; gravity) -&gt; bool</span>
            </dt>
            <dd>Set the kinematic information necessary for the force estimation assuming that a given frame is not accelerating with respect to the inertial frame.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a903f0fca32abdb551ffe7eda013ce462" class="m-doc">computeExpectedFTSensorsMeasurements</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1LinkUnknownWrenchContacts.html" class="m-doc">LinkUnknownWrenchContacts</a>&amp; unknowns,
              <a href="classiDynTree_1_1SensorsMeasurements.html" class="m-doc">SensorsMeasurements</a>&amp; predictedMeasures,
              <a href="classiDynTree_1_1LinkContactWrenches.html" class="m-doc">LinkContactWrenches</a>&amp; estimatedContactWrenches,
              <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; estimatedJointTorques) -&gt; bool</span>
            </dt>
            <dd>Predict FT sensors using the knoledge of external wrenches location.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a9abd2346013d2a811c5336255323962b" class="m-doc">estimateExtWrenchesAndJointTorques</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1LinkUnknownWrenchContacts.html" class="m-doc">LinkUnknownWrenchContacts</a>&amp; unknowns,
              const <a href="classiDynTree_1_1SensorsMeasurements.html" class="m-doc">SensorsMeasurements</a>&amp; ftSensorsMeasures,
              <a href="classiDynTree_1_1LinkContactWrenches.html" class="m-doc">LinkContactWrenches</a>&amp; estimatedContactWrenches,
              <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; estimatedJointTorques) -&gt; bool</span>
            </dt>
            <dd>Estimate the external wrenches and the internal joint torques using the measurement of the internal F/T sensors.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a584e5d2ca3426529f407dbb5248f290e" class="m-doc">checkThatTheModelIsStill</a>(</span><span class="m-doc-wrap">const double gravityNorm,
              const double properAccTol,
              const double verbose) -&gt; bool</span>
            </dt>
            <dd>Check if the kinematics set in the model are the one of a fixed model.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ad52d10a9a145eba8d52c67ea65128554" class="m-doc">estimateLinkNetWrenchesWithoutGravity</a>(</span><span class="m-doc-wrap"><a href="classiDynTree_1_1LinkWrenches.html" class="m-doc">LinkNetTotalWrenchesWithoutGravity</a>&amp; netWrenches) -&gt; bool</span>
            </dt>
            <dd>Compute the vector of the sum of all the wrenches (both internal and external, excluding gravity) acting on link i, expressed (both orientation and point) with respect to the reference frame of link i, using the articulated body model and the kinematics information provided by the updateKinematics* methods.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="ab62c38a61392178a65af5a90a6a7a076"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab62c38a61392178a65af5a90a6a7a076" class="m-doc-self">setModelAndSensors</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a>&amp; _model,
              const <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a>&amp; _sensors)</span></span>
            </h3>
            <p>Set model and sensors used for the estimation.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">_model&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the kinematic and dynamic model used for the estimation.</td>
                </tr>
                <tr>
                  <td>_sensors&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the sensor model used for the estimation.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went well (model and sensors are well formed), false otherwise.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="af366663099c8b4772ab27485bc3581f8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#af366663099c8b4772ab27485bc3581f8" class="m-doc-self">loadModelAndSensorsFromFile</a>(</span><span class="m-doc-wrap">const std::string filename,
              const std::string filetype = &quot;&quot;)</span></span>
            </h3>
            <p>Load model and sensors from file.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">filename&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>path to the file to load.</td>
                </tr>
                <tr>
                  <td>filetype&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>(optional) explicit definiton of the filetype to load. Only &quot;urdf&quot; is supported at the moment.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went well (files were correctly loaded and consistent), false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-danger"><h4><a href="deprecated.html#_deprecated000001" class="m-doc">Deprecated</a></h4><p>Use <a href="classiDynTree_1_1ModelLoader.html#a4731f7a0967a0f88b9ee760027f42c28" class="m-doc">iDynTree::<wbr />ModelLoader::<wbr />loadModelFromFile</a> and call setModelAndSensors on the parsed <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a> and <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="a65ada8c5265bed3d7f19bd1b3694be18"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a65ada8c5265bed3d7f19bd1b3694be18" class="m-doc-self">loadModelAndSensorsFromFileWithSpecifiedDOFs</a>(</span><span class="m-doc-wrap">const std::string filename,
              const std::vector&lt;std::string&gt;&amp; consideredDOFs,
              const std::string filetype = &quot;&quot;)</span></span>
            </h3>
            <p>Load model and sensors from file, specifieng the dof considered for the estimation.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">filename&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>path to the file to load.</td>
                </tr>
                <tr>
                  <td>consideredDOFs&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>list of dof to consider in the model.</td>
                </tr>
                <tr>
                  <td>filetype&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>(optional) explicit definiton of the filetype to load. Only &quot;urdf&quot; is supported at the moment.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went well (files were correctly loaded and consistent), false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-info"><h4>Note</h4><p>this will create e a reduced model only with the joint specified in consideredDOFs and the fixed joints in which FT sensor are mounted.</p></aside>
          </div></section>
          <section class="m-doc-details" id="ae1fcc20d0e3eb0eace44e334d931c0f4"><div>
            <h3>
              <span class="m-doc-wrap-bumper">const <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a>&amp; iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ae1fcc20d0e3eb0eace44e334d931c0f4" class="m-doc-self">model</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Get used model.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the kinematic and dynamic model used for estimation.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a5da76e1decfef128f4580a108d865166"><div>
            <h3>
              <span class="m-doc-wrap-bumper">const <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a>&amp; iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5da76e1decfef128f4580a108d865166" class="m-doc-self">sensors</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Get used sensors.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the sensor model used for estimation.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a0ad964451590f8bbe0a9bb9e01de1374"><div>
            <h3>
              <span class="m-doc-wrap-bumper">const <a href="classiDynTree_1_1SubModelDecomposition.html" class="m-doc">SubModelDecomposition</a>&amp; iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0ad964451590f8bbe0a9bb9e01de1374" class="m-doc-self">submodels</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Get the used submodel decomposition.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the used submodel decomposition.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a5d44956cd4c5a64c2c3397fce2c9edd8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5d44956cd4c5a64c2c3397fce2c9edd8" class="m-doc-self">updateKinematicsFromFloatingBase</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1JointPosDoubleArray.html" class="m-doc">JointPosDoubleArray</a>&amp; jointPos,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointVel,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointAcc,
              const FrameIndex&amp; floatingFrame,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; properClassicalLinearAcceleration,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; angularVel,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; angularAcc)</span></span>
            </h3>
            <p>Set the kinematic information necessary for the force estimation using the acceleration and angular velocity information of a floating frame.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">jointPos&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the position of the joints of the model.</td>
                </tr>
                <tr>
                  <td>jointVel&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the velocities of the joints of the model.</td>
                </tr>
                <tr>
                  <td>jointAcc&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the accelerations of the joints of the model.</td>
                </tr>
                <tr>
                  <td>floatingFrame&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the index of the frame for which kinematic information is provided.</td>
                </tr>
                <tr>
                  <td>properClassicalLinearAcceleration&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>proper (actual acceleration-gravity) classical acceleration of the origin of the specified frame, expressed in the specified frame orientation.</td>
                </tr>
                <tr>
                  <td>angularVel&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>angular velocity (wrt to an inertial frame) of the specified floating frame, expressed in the specified frame orientation.</td>
                </tr>
                <tr>
                  <td>angularAcc&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>angular acceleration (wrt to an inertial frame) of the specified floating frame , expressed in the specified frame orientation.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went ok, false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-info"><h4>Note</h4><p>Tipically the floating frame information comes from an sensor containing a gyroscope (providing the angular velocity) and an accelerometer (providing the classical proper acceleration). As inertial sensors that return angular acceleration exist but are not common, the angular acceleration is usually obtained by numerical derivation on the angular velocity measure. In some cases it could make sense to just neglet the contribution of the floating frame angular acceleration (setting it to a zero vector), if its impact to the dynamics is marginal.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a988f7114c5e0661ddd931d98c04645c9"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a988f7114c5e0661ddd931d98c04645c9" class="m-doc-self">updateKinematicsFromFixedBase</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1JointPosDoubleArray.html" class="m-doc">JointPosDoubleArray</a>&amp; jointPos,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointVel,
              const <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; jointAcc,
              const FrameIndex&amp; fixedFrame,
              const <a href="classiDynTree_1_1VectorFixSize.html" class="m-doc">Vector3</a>&amp; gravity)</span></span>
            </h3>
            <p>Set the kinematic information necessary for the force estimation assuming that a given frame is not accelerating with respect to the inertial frame.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">jointPos&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the position of the joints of the model.</td>
                </tr>
                <tr>
                  <td>jointVel&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the velocities of the joints of the model.</td>
                </tr>
                <tr>
                  <td>jointAcc&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the accelerations of the joints of the model.</td>
                </tr>
                <tr>
                  <td>fixedFrame&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the index of the frame that is not accelerating with respect to the inertial frame.</td>
                </tr>
                <tr>
                  <td>gravity&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the gravity acceleration vector, expressed in the specified fixed frame.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went ok, false otherwise.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a903f0fca32abdb551ffe7eda013ce462"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a903f0fca32abdb551ffe7eda013ce462" class="m-doc-self">computeExpectedFTSensorsMeasurements</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1LinkUnknownWrenchContacts.html" class="m-doc">LinkUnknownWrenchContacts</a>&amp; unknowns,
              <a href="classiDynTree_1_1SensorsMeasurements.html" class="m-doc">SensorsMeasurements</a>&amp; predictedMeasures,
              <a href="classiDynTree_1_1LinkContactWrenches.html" class="m-doc">LinkContactWrenches</a>&amp; estimatedContactWrenches,
              <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; estimatedJointTorques)</span></span>
            </h3>
            <p>Predict FT sensors using the knoledge of external wrenches location.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">unknowns&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the unknown external wrenches.</td>
                </tr>
                <tr>
                  <td>predictedMeasures&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the estimate measures for the FT sensors.</td>
                </tr>
                <tr>
                  <td>estimatedContactWrenches&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the estimated contact wrenches.</td>
                </tr>
                <tr>
                  <td>estimatedJointTorques&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the estimated joint torques.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went well, false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<p>This function is used to estimate the expected measurement of the FT sensors. The typical use of this function is to specify only one external unknown wrench in the unknowns parameter and then compute the expected measurements of the FT sensors using the kinematic information specified with an updateKinematics*** method. The location of the single external unknown wrench is the one of the only link that is supporting the weight of the robot.</p><p>This function can also be used to estimate the FT sensor measurements in case two unknown external wrenches are applied on the robot, if some additional assumption about the simmetry of the robot configuration, the joint torques and the external wrenches can be done.</p>
          </div></section>
          <section class="m-doc-details" id="a9abd2346013d2a811c5336255323962b"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a9abd2346013d2a811c5336255323962b" class="m-doc-self">estimateExtWrenchesAndJointTorques</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1LinkUnknownWrenchContacts.html" class="m-doc">LinkUnknownWrenchContacts</a>&amp; unknowns,
              const <a href="classiDynTree_1_1SensorsMeasurements.html" class="m-doc">SensorsMeasurements</a>&amp; ftSensorsMeasures,
              <a href="classiDynTree_1_1LinkContactWrenches.html" class="m-doc">LinkContactWrenches</a>&amp; estimatedContactWrenches,
              <a href="classiDynTree_1_1JointDOFsDoubleArray.html" class="m-doc">JointDOFsDoubleArray</a>&amp; estimatedJointTorques)</span></span>
            </h3>
            <p>Estimate the external wrenches and the internal joint torques using the measurement of the internal F/T sensors.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">unknowns&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the unknown external wrenches</td>
                </tr>
                <tr>
                  <td>ftSensorsMeasures&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the measurements for the FT sensors.</td>
                </tr>
                <tr>
                  <td>estimatedContactWrenches&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the estimated contact wrenches.</td>
                </tr>
                <tr>
                  <td>estimatedJointTorques&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the estimated joint torques.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went ok, false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<p>This is the main method of the class. The technique implemented in this method is the one described in the paper:</p><p>&quot;Contact force estimations using tactile sensors and force/torque sensors&quot;</p><p>Del Prete, A., Natale, L., Nori, F., &amp; Metta, G. (2012). Contact force estimations using tactile sensors and force/torque sensors. URL : <a href="http://www.researchgate.net/profile/Andrea_Del_Prete/publication/236152161_Contact_Force_Estimations_Using_Tactile_Sensors_and_Force__Torque_Sensors/links/00b495166e74a5369d000000.pdf">http://www.researchgate.net/profile/Andrea_<wbr />Del_<wbr />Prete/publication/236152161_<wbr />Contact_<wbr />Force_<wbr />Estimations_<wbr />Using_<wbr />Tactile_<wbr />Sensors_<wbr />and_<wbr />Force_<wbr />_<wbr />Torque_<wbr />Sensors/links/00b495166e74a5369d000000.pdf</a></p><aside class="m-note m-info"><h4>Note</h4><p>There should be at least 6 unknowns variables for each submodel for which the estimation of external wrenches is performed (i.e. usually 1 unknown wrench for each submodel). If is not the case, undefined results could occur in the estimation.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a584e5d2ca3426529f407dbb5248f290e"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a584e5d2ca3426529f407dbb5248f290e" class="m-doc-self">checkThatTheModelIsStill</a>(</span><span class="m-doc-wrap">const double gravityNorm,
              const double properAccTol,
              const double verbose)</span></span>
            </h3>
            <p>Check if the kinematics set in the model are the one of a fixed model.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">gravityNorm&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the norm of the gravity (tipically 9.81) against with all the proper accelerations are check (for a still model, the proper acceleration norm should be close to the gravity norm.</td>
                </tr>
                <tr>
                  <td>properAccTol&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>tolerance to use for the check on the proper acceleration norm.</td>
                </tr>
                <tr>
                  <td>verbose&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>true if you want to print debug information, false otherwise.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if the model is still, false if it is moving or if the kinematics was never setted.</td>
                </tr>
              </tfoot>
            </table>
<p>While computing the expected F/T sensors measures, you tipically want the model to be still, to reduce the sources of noise .</p><aside class="m-note m-info"><h4>Note</h4><p>This method can be computationally expensive, so in most case it may be a better idea to just do the check on the input variables (joint velocities, joint acceleration).</p></aside>
          </div></section>
          <section class="m-doc-details" id="ad52d10a9a145eba8d52c67ea65128554"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool iDynTree::<wbr />ExtWrenchesAndJointTorquesEstimator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ad52d10a9a145eba8d52c67ea65128554" class="m-doc-self">estimateLinkNetWrenchesWithoutGravity</a>(</span><span class="m-doc-wrap"><a href="classiDynTree_1_1LinkWrenches.html" class="m-doc">LinkNetTotalWrenchesWithoutGravity</a>&amp; netWrenches)</span></span>
            </h3>
            <p>Compute the vector of the sum of all the wrenches (both internal and external, excluding gravity) acting on link i, expressed (both orientation and point) with respect to the reference frame of link i, using the articulated body model and the kinematics information provided by the updateKinematics* methods.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">netWrenches&nbsp;<span class="m-label m-flat m-warning">out</span></td>
                  <td>the vector of link net wrenches.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>true if all went ok, false otherwise.</td>
                </tr>
              </tfoot>
            </table>
<p>This is tipically computed as I*a+v*(I*v) , where a is the proper acceleration.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>iDynTree documentation. Licensed under the <a href="https://www.gnu.org/licenses/lgpl-3.0.en.html">GNU Lesser General Public License v3.0</a>. Project maintained by the <a href="https://www.iit.it/web/ami/">Artificial and Mechanical Intelligence Lab</a>. Contact the team via <a href="https://github.com/robotology/idyntree/issues/new">GitHub</a>.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
